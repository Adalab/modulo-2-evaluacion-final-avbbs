"use strict";const charactersList=document.querySelector(".js-characters"),favoritesList=document.querySelector(".js-favorites"),form=document.querySelector(".js-form"),inputSearch=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-btn"),btnReset=document.querySelector(".js-reset-btn");let allCharacters=[],favorites=[];function renderArticle(e){let t="";return t=-1===favorites.findIndex(t=>t.char_id===e.char_id)?"":"select-character",`<article class="article js-article ${t}" id="${e.char_id}">\n  <img class="article__img" src= '${e.img}'/>\n  <h3 class="article__title">${e.name}</h3>\n  <p class="article__text">${e.status}</p>\n</article>`}function renderAllArticles(e){let t="";for(let r=0;r<e.length;r++)t+=renderArticle(e[r]);charactersList.innerHTML=t,listenerClickArticle()}function renderFavoritesArticles(){let e="";for(let t=0;t<favorites.length;t++)e+=renderArticle(favorites[t]);favoritesList.innerHTML=e}function listenerClickArticle(){const e=document.querySelectorAll(".js-article");for(const t of e)t.addEventListener("click",handleClickCharacters)}function handleClickCharacters(e){e.currentTarget.classList.toggle("select-character");const t=allCharacters.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favorites.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?(favorites.push(t),localStorage.setItem("favoritesLocal",JSON.stringify(favorites))):(favorites.splice(r,1),localStorage.setItem("favoritesLocal",JSON.stringify(favorites))),renderFavoritesArticles()}form.addEventListener("submit",e=>{e.preventDefault()}),btnSearch.addEventListener("click",()=>{const e=inputSearch.value;renderAllArticles(allCharacters.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())))}),btnReset.addEventListener("click",e=>{e.preventDefault(),favoritesList.innerHTML=""}),renderAllArticles(allCharacters),fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{allCharacters=e,renderAllArticles(allCharacters)});const keepFavorites=JSON.parse(localStorage.getItem("favoritesLocal"));null!==keepFavorites&&(favorites=keepFavorites,renderFavoritesArticles());